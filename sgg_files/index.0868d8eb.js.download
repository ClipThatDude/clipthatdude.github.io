"use strict";(self.webpackChunkcustomer_service=self.webpackChunkcustomer_service||[]).push([[4633],{704:(t,e,n)=>{n.d(e,{A:()=>d});var r=n(9542),a=n(6752),o=n(8697),i=n(3509),c=n(62);function s(t,e,n){return e=(0,i.A)(e),(0,o.A)(t,u()?Reflect.construct(e,n||[],(0,i.A)(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}const d=function(t){function e(t){var n;return(0,r.A)(this,e),(n=s(this,e,["[".concat(t.method,":").concat(t.endpoint,"] [code:").concat(t.code,"]")])).info=void 0,n.code=void 0,n.name="APIError",n.info=t,n.code=t.code,n}return(0,c.A)(e,t),(0,a.A)(e,[{key:"isNetworkIssue",get:function(){return"number"!==typeof this.info.statusCode&&["ERR_CANCELED","ERR_TIMEOUT","ERR_NETWORK"].includes(this.info.statusCode)}}])}(n(7709).A)},7709:(t,e,n)=>{n.d(e,{A:()=>p});var r=n(8557),a=n(9542),o=n(6752),i=n(8697),c=n(3509),s=n(62),u=n(9802);function d(t,e,n){return e=(0,c.A)(e),(0,i.A)(t,l()?Reflect.construct(e,n||[],(0,c.A)(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}const p=function(t){function e(){var t;(0,a.A)(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=d(this,e,[].concat(r))).isExpected=!1,t.logCount=0,t}return(0,s.A)(e,t),(0,o.A)(e,[{key:"isLoggingRequired",get:function(){return!this.isExpected&&this.logCount>2}},{key:"isLogged",get:function(){return this.logCount>0}},{key:"extend",value:function(t){if(void 0!==t){var e=Object.getOwnPropertyDescriptor(this,"stack");if(!0===(null===e||void 0===e?void 0:e.writable)||(null===e||void 0===e?void 0:e.set))try{var n,a,o=null!==(n=null===(a=this.stack)||void 0===a?void 0:a.split("\n"))&&void 0!==n?n:[],i=(0,r.A)(new Set([].concat((0,r.A)(o),(0,r.A)(t))));this.stack=i.join("\n")||void 0}catch(c){}}}}])}((0,u.A)(Error))},7743:(t,e,n)=>{n.d(e,{S:()=>h});var r=n(7199),a=n(9542),o=n(6752),i=n(8715),c="grafana_user_journey",s=n(9175),u=r.W.module("UserJourneyTracker");function d(){try{var t=s.J.get(c);if(!t)return;return JSON.parse(t)}catch(e){return void u.error("readFromStorage failed",{error:e,errorName:"UserJourneyTrackerReadStorageError",data:{storageKey:c}})}}var l=n(4854);function p(t){return t.map((function(t){return t.pathName})).reverse().join(",")}var h=new(function(){return(0,o.A)((function t(e,n){var r,o;(0,a.A)(this,t),this.data=void 0,this.logger=void 0,this.maxJourneyLength=void 0,this.journeyTtlMs=void 0,this.version=2,this.logger=e,this.maxJourneyLength=null!==(r=null===n||void 0===n?void 0:n.maxJourneyLength)&&void 0!==r?r:5,this.journeyTtlMs=null!==(o=null===n||void 0===n?void 0:n.journeyTtlMs)&&void 0!==o?o:6e5;var i=d();this.data=i||{userJourneys:[]}}),[{key:"init",value:function(){var t=this,e=function(t){var e,n=(null!==(e=(l.A.langPath&&t.startsWith(l.A.langPath)?t.substring(l.A.langPath.length):t).split(/[?#]/)[0])&&void 0!==e?e:"").split("/").filter(Boolean);return 0===n.length?"/":"/".concat(n.join("/"))}(i.A.pathname),n=Date.now();this.data.userJourneys=this.data.userJourneys.filter((function(e){return n-e.timestamp<=t.journeyTtlMs}));var r=this.data.userJourneys.at(-1);if((null===r||void 0===r?void 0:r.pathName)!==e){for(this.data.userJourneys.push({pathName:e,timestamp:n});this.data.userJourneys.length>this.maxJourneyLength;)this.data.userJourneys.shift();!function(t){try{var e=JSON.stringify(t);s.J.set(c,e)}catch(n){u.error("persistToStorage failed",{error:n,errorName:"UserJourneyTrackerPersistStorageError",data:{storageKey:c}})}}(this.data)}}},{key:"getSnapshot",value:function(){return this.data}},{key:"chatbotOpened",value:function(t){var e=Date.now();this.data.ticketId=t.ticketId,this.data.from=t.from,this.data.contextualStart=t.contextualStart,this.data.contextualParams=t.contextualParams,this.data.chatOpenTimestamp=e,this.logger.info("[UserJourneyTracker] chatbot_opened",{version:this.version,journeyTtlMs:this.journeyTtlMs,maxJourneyLength:this.maxJourneyLength,userJourneys:this.data.userJourneys,ticketId:t.ticketId,from:t.from,contextualStart:t.contextualStart,contextualParams:t.contextualParams?JSON.stringify(t.contextualParams):void 0,journeyPattern:p(this.data.userJourneys)})}},{key:"agentTransferred",value:function(){if(this.data.chatOpenTimestamp){var t=Date.now();this.data.transferToAgentTimestamp=t,this.data.chatWithBotDuration=t-this.data.chatOpenTimestamp,this.logger.info("[UserJourneyTracker] agent_transferred",{version:this.version,journeyTtlMs:this.journeyTtlMs,maxJourneyLength:this.maxJourneyLength,userJourneys:this.data.userJourneys,ticketId:this.data.ticketId,from:this.data.from,contextualStart:this.data.contextualStart,contextualParams:this.data.contextualParams?JSON.stringify(this.data.contextualParams):void 0,journeyPattern:p(this.data.userJourneys),chatWithBotDuration:this.data.chatWithBotDuration})}else this.logger.warn("agentTransferred called without chatbotOpened")}}])}())(r.T)},3460:(t,e,n)=>{function r(t){if(t&&0!==Object.keys(t).length)try{return encodeURIComponent(JSON.stringify(t))}catch(e){return}}function a(t){if(t)try{var e=decodeURIComponent(t),n=JSON.parse(e);if(!n||"object"!==typeof n||Array.isArray(n))return;var r={};return Object.keys(n).forEach((function(t){var e=n[t];"string"===typeof e&&(r[t]=e)})),Object.keys(r).length>0?r:void 0}catch(a){return}}function o(t){if(t&&"object"===typeof t&&!Array.isArray(t)){var e={};return Object.keys(t).forEach((function(n){var r=t[n],a=typeof r;"string"===a?e[n]=r:"number"!==a&&"boolean"!==a||(e[n]=String(r))})),Object.keys(e).length>0?e:void 0}}n.d(e,{gy:()=>r,uV:()=>a,xC:()=>o})},7199:(t,e,n)=>{n.d(e,{T:()=>k,W:()=>x});var r=n(7566),a=n(7153),o=n(9542),i=n(6752),c=n(9434),s=function(){function t(e){(0,o.A)(this,t),this.context=void 0,this.name=void 0,this.context=e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.name=r.map((function(t){return t?"[".concat(t,"]"):""})).join("")}return(0,i.A)(t,[{key:"instance",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,a.A)(t,[this.context].concat(n))}},{key:"registerContext",value:function(t,e){return this.context.registerContext(t,e)}},{key:"registerTag",value:function(t,e){return this.context.registerTag(t,e)}},{key:"reset",value:function(){this.context.reset()}},{key:"logEntry",value:function(t,e,n){var a=this.context.computeContext(),o=this.context.computeTags();c.v[t]("[grafanaLogger]".concat(this.name," ").concat(e),{extra:(0,r.A)({__event:e,__prefix:this.name},n),type:"customize",context:a,tags:o})}},{key:"info",value:function(t,e){this.logEntry("info",t,e)}},{key:"debug",value:function(t,e){this.logEntry("debug",t,e)}},{key:"warn",value:function(t,e){this.logEntry("warn",t,e)}},{key:"error",value:function(t,e){this.logEntry("error",t,e)}}])}();const u=s;var d=function(){return(0,i.A)((function t(){(0,o.A)(this,t),this._activeCtxRegistrations={},this._activeTagRegistrations={}}),[{key:"registerContext",value:function(t,e){var n=this;return this._activeCtxRegistrations[t]=e,function(){delete n._activeCtxRegistrations[t]}}},{key:"registerTag",value:function(t,e){var n=this;return this._activeTagRegistrations[t]=e,function(){delete n._activeTagRegistrations[t]}}},{key:"computeContext",value:function(){var t=this,e={};return Object.keys(this._activeCtxRegistrations).forEach((function(n){try{var r=t._activeCtxRegistrations[n]();r&&(e[n]=r)}catch(a){e[n]="Failed to capture context"}})),e}},{key:"computeTags",value:function(){var t=this,e={};return Object.keys(this._activeTagRegistrations).forEach((function(n){try{var r=t._activeTagRegistrations[n];e[n]="function"===typeof r?r():r}catch(a){e[n]="Failed to capture tag"}})),e}},{key:"reset",value:function(){this._activeCtxRegistrations={},this._activeTagRegistrations={}}}])}();const l=d;var p=n(4854),h=n(704),f=n(7709),v={id:196,token:"b20d9b91c29b9810e01d642cc8b2abc1"},g=function(){return(0,i.A)((function t(e){(0,o.A)(this,t),this.context=void 0,this.context=e,this.registerTag("csVersion",(function(){var t,e,n;return null!==(t=null===(e=p.A.versionUrls)||void 0===e||null===(n=e.customerService)||void 0===n?void 0:n.split("/").pop())&&void 0!==t?t:""}))}),[{key:"registerContext",value:function(t,e){return this.context.registerContext(t,e)}},{key:"registerTag",value:function(t,e){return this.context.registerTag(t,e)}},{key:"computeContext",value:function(){return this.context.computeContext()}},{key:"computeTags",value:function(){return this.context.computeTags()}},{key:"reset",value:function(){this.context.reset()}},{key:"logEntry",value:function(t,e,n){var a=null===n||void 0===n?void 0:n.error,o=(0,r.A)((0,r.A)({},this.computeTags()),null===n||void 0===n?void 0:n.tags),i=null!==o&&void 0!==o&&o.chatbot?"[".concat(o.chatbot,"] "):"",s=(0,r.A)((0,r.A)({},n),{},{data:null===n||void 0===n?void 0:n.data,level:(null===n||void 0===n?void 0:n.level)||t,context:this.computeContext(),tags:o,customConfig:(0,r.A)({project:v},(null===n||void 0===n?void 0:n.errorName)&&{error:{type:n.errorName}})});if(!(a instanceof f.A)||a.isLoggingRequired)return a instanceof f.A&&(a.isLogged&&["error","fatal"].includes(s.level)&&(s.level="info"),a.logCount++),a instanceof h.A&&(a.isNetworkIssue&&(s.level="info"),s.data=(0,r.A)((0,r.A)({},a.info),s.data||{})),"prod"!==p.A.envSign&&console.error("\ud83d\udea8 [".concat(t,"] ").concat(e),s,null===n||void 0===n?void 0:n.error),c.v[t]("".concat(i).concat(e),s)}},{key:"info",value:function(t,e){return this.logEntry("info",t,e)}},{key:"warn",value:function(t,e){return this.logEntry("warn",t,e)}},{key:"error",value:function(t,e){return this.logEntry("error",t,e)}},{key:"debug",value:function(t,e){return this.logEntry("debug",t,e)}},{key:"module",value:function(t){var e=this,n=function(e){return"[".concat(t,"] ").concat(e)};return{registerTag:this.registerTag.bind(this),registerContext:this.registerContext.bind(this),reset:this.reset.bind(this),info:function(t,r){return e.info(n(t),r)},warn:function(t,r){return e.warn(n(t),r)},error:function(t,r){return e.error(n(t),r)},debug:function(t,r){return e.debug(n(t),r)}}}}])}();const m=g;var y=new l,x=new m(y),k=new u(y)},8794:(t,e,n)=>{var r=n(7255),a=n(2816),o=n(2207),i=n.n(o),c=n(5816),s=n(4854),u=n(3909),d=n(8715),l=n(9692),p=n(7743),h="ok-cs-button",f="ok-cs-unread-coach-mark",v="ok-cs-coach-container",g="ok-cs-coach-content",m="ok-cs-coach-header",y="ok-cs-coach-message",x="ok-cs-coach-close",k="ok-cs-coach-beak",A="ok-cs-unread-badge",b="cs-loader-spin",w="oka_unread_data",C="ok-assistant",E="ok_".concat(C),T={INCOMING:"global_chatbot_toggled",OUTGOING:"global_chatbot_toggled_internal",SHOW_NOTIFICATION:"chatbot_show_notification",HIDE_NOTIFICATION:"chatbot_hide_notification"},I="ok_assistant_performance_monitor_channel",_="OKA_OPEN",O="OKA_READY",j="NOT_INJECTED",S="INJECTED",R="INJECTING",N=function(){var t=j;return{setInjecting:function(){t=R},setInjected:function(){t=S},setNotInjected:function(){t=j},isInjected:function(){return t===S},isNotInjected:function(){return t===j},isInjecting:function(){return t===R}}}();function J(t){var e=t.isLoaded;u.A.send(I,{name:_,timestamp:performance.now(),type:"start",context:{isLoaded:e}})}function L(){return M.apply(this,arguments)}function M(){return(M=(0,a.A)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.e.loadModule("customerService",["chatbot"]));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return B.apply(this,arguments)}function B(){return(B=(0,a.A)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!N.isInjected()&&!N.isInjecting()){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return N.setInjecting(),u.A.send(I,{name:O,timestamp:performance.now(),type:"start"}),t.abrupt("return",L().then((function(){N.setInjected()})).catch((function(){N.setNotInjected()})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){return{backgroundImage:t?"/cdn/assets/imgs/257/433FAEB96F0DED76.svg":"/cdn/assets/imgs/257/AD06EFAB8A67B0BE.svg",backgroundColor:t?"linear-gradient(94deg, #E9AD52 0%, #FFDBB5 97.81%)":"#2B6D17",spinnerColor:t?"#000000":"#ffffff",spinnerThickness:"2px",backgroundSize:"55%"}}function U(t,e){var n=s.A.cdnBaseUrl,r=D(e),a=r.backgroundImage,o=r.backgroundColor,i=r.backgroundSize,c=s.A.isRTL,u=c?"left: 16px;":"right: 16px;",d=c?"transform: scaleX(-1);":"",l=document.createElement("div");l.id=t;var p=document.createElement("style");p.textContent="#".concat(t,"{")+"display: flex;position: fixed;"+"".concat(u)+"".concat(d)+"bottom: 16px;z-index: 10000;width: 44px;height: 44px;border: 0;border-radius: 50%;opacity: 1;"+"background: url(".concat(n).concat(a,") center/").concat(i," no-repeat, ").concat(o,";")+"cursor: pointer;justify-content: center;align-items: center;}"+"#".concat(t,".cs-loading { background: ").concat(o,"; }");var h=function(){var t=document.createElement("div");return t.id=b,t}();return l.appendChild(h),document.head.appendChild(p),document.body.appendChild(l),l}var q=n(271),F=n(7818),W=n(7566),z={screens:["sm"],visible:!1},G={visible:!1,screens:["sm","lg"]},V={visible:!0,screens:["sm","lg"]},H=[(0,W.A)({path:"/help",query:"embedded",queryValue:"true",exact:!1},G),(0,W.A)({path:"/help",exact:!0},V),(0,W.A)({path:"/download",exact:!0},V),(0,W.A)({path:"/account/register",exact:!0},V),(0,W.A)({path:"/",exact:!0},V),(0,W.A)({path:"/what-is-okx-contest"},G),(0,W.A)({path:"/trade",exact:!0},G),(0,W.A)({path:"/trade-spot"},G),(0,W.A)({path:"/trade-option/simple",exact:!0},G),(0,W.A)({path:"/support-center/video-verification"},G),(0,W.A)({path:"/support-center/voice-call",exact:!0},G),(0,W.A)({path:"/trade-option-simple"},G),(0,W.A)({path:"/trade-swap"},G),(0,W.A)({path:"/trade-futures"},G),(0,W.A)({path:"/trade-margin"},G),(0,W.A)({path:"/trade-option"},G),(0,W.A)({path:"/trade-option-chain"},G),(0,W.A)({path:"/trade-spot-strategy"},G),(0,W.A)({path:"/trade-swap-strategy"},G),(0,W.A)({path:"/trade-arbitrage"},G),(0,W.A)({path:"/derivatives/swap/full"},G),(0,W.A)({path:"/derivatives/futures/full"},G),(0,W.A)({path:"/liquid-marketplace"},G),(0,W.A)({path:"/web3/explorer"},G),(0,W.A)({path:"/trade-chart"},G),(0,W.A)({path:"/trade-chart-3"},G),(0,W.A)({path:"/trade-chart-4"},G),(0,W.A)({path:"/livestream"},G),(0,W.A)({path:"/mini-app"},G),(0,W.A)({path:"/kyc-verify"},G),(0,W.A)({path:"/messages"},G)];function K(t,e){var n=function(t){var e=new q.A(t);return{pathname:e.url.pathname,search:e.url.search}}(t),r=n.pathname,a=n.search,o=e.path,i=e.exact,c=e.query,u=e.queryValue;if("/"===o&&function(t){var e=s.A.langPath,n=0===t.indexOf(e)?t.substring(e.length):t;return"/"===n||""===n}(r))return!0;var d=!0;c&&(d=new F.A(a).get(c)===u);if(!d)return!1;var l="^".concat(s.A.langPath),p=new RegExp("".concat(l).concat(o,"$"));if(i)return p.test(r);var h=o.endsWith("/")?o:"".concat(o,"/"),f=new RegExp("".concat(l).concat(h));return p.test(r)||f.test(r)}function Y(t,e){var n=function(t){var e,n;return{visible:null!==(e=null===t||void 0===t?void 0:t.visible)&&void 0!==e?e:z.visible,screens:null!==(n=null===t||void 0===t?void 0:t.screens)&&void 0!==n?n:z.screens}}(e),r=n.visible;return n.screens.includes(t)?r:!r}function X(t){var e=function(t){return H.find((function(e){return K(t,e)}))}(t);return{sm:!Y("sm",e),lg:!Y("lg",e)}}var $=n(3010),Q=n(4985),Z=n(7185),tt=n.n(Z);function et(){return nt.apply(this,arguments)}function nt(){return(nt=(0,a.A)(i().mark((function t(){var e,n,r,a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt().checkIsLogin();case 2:if(t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:if(n=null!==(e=$.A.g.get("profile"))&&void 0!==e?e:{},r=n.uuid,a=void 0===r?"":r,t.prev=6,!a){t.next=13;break}return t.next=10,tt().getWithCache("/v2/support/chatbot/vip/whitelist?uuid=".concat(a),{cacheSeconds:600});case 10:t.t0=t.sent,t.next=16;break;case 13:return t.next=15,tt().get("/v2/support/chatbot/vip/whitelist");case 15:t.t0=t.sent;case 16:return o=t.t0,t.abrupt("return",Boolean(o.data.data));case 20:return t.prev=20,t.t1=t.catch(6),t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,null,[[6,20]])})))).apply(this,arguments)}function rt(){return at.apply(this,arguments)}function at(){return(at=(0,a.A)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,Q.V)({project:"okx_web_support",site:"okx"}).then((function(t){return t.supportcenter_landing_coachmrk_label_got_new_msg})).catch((function(){return""})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ot(){return it.apply(this,arguments)}function it(){return(it=(0,a.A)(i().mark((function t(){var e,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,tt().get("/priapi/v1/assistant/session/unread-message-count");case 3:return e=t.sent,n=e.data,t.abrupt("return",n.data);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{unreadCount:0,hasUnread:!1});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}var ct=n(9420);n(2187);function st(){var t=document.createElement("div");return t.id=A,t.style.display="none",t}function ut(t,e){if(!t)return null;var n=document.createElement("div");n.id=f,n.style.display="none";var r=document.createElement("div");r.id=v;var a=document.createElement("div");a.id=g;var o=document.createElement("div");o.id=m;var i=document.createElement("div");i.id=y,i.textContent=(0,ct.YW)(t);var c=document.createElement("i");c.id=x,c.className="icon iconfont cs-okx-support-close",c.onclick=function(){e&&e()};var s=document.createElement("div");return s.id=k,o.appendChild(i),o.appendChild(c),a.appendChild(o),r.appendChild(a),r.appendChild(s),n.appendChild(r),n}function dt(){var t=document.createElement("style"),e=s.A.isRTL,n=e?"left: 15px;":"right: 15px;",r=e?"margin-left: 16px;":"margin-right: 16px;",a=e?"margin-left: 8px;":"margin-right: 8px;";t.textContent="#".concat(f," {")+"position: fixed;"+"".concat(n)+"bottom: 67px;z-index: 4000;display: flex;flex-direction: column;align-items: flex-end;justify-content: flex-end;}"+"#".concat(v," {")+"display: flex;flex-direction: column;align-items: center;}"+"#".concat(g," {")+"background: white;border: 0.5px solid #e6e6e6;border-radius: 8px;padding: 12px 16px;display: flex;flex-direction: column;box-shadow: 0px 20px 40px 0px rgba(0,0,0,0.2);max-width: 280px;}"+"#".concat(m," {")+"display: flex;align-items: flex-start;justify-content: space-between;}"+"#".concat(y," {")+"font-size: 16px;line-height: 20px;color: black;overflow-wrap: anywhere;align-self: center;"+"".concat(a)+"}"+"#".concat(x," {")+"display: flex;align-items: center;justify-content: center;cursor: pointer;font-size: 24px;width: 24px;height: 24px;color: #909090;}"+"#".concat(x,":hover {")+"color: black;}"+"#".concat(k," {")+"width: 16px;height: 12px;margin-top: -8px;"+"".concat(r)+"align-self: end;background: white;transform: rotate(45deg);}",document.head.appendChild(t)}function lt(){var t=document.createElement("style");t.textContent="#".concat(A," {")+"position: relative;bottom: 7px;left: 8px;width: 8px;height: 8px;background-color: #eb4b6d;border-radius: 50%;z-index: 10000;display: none;}",document.head.appendChild(t)}function pt(t){var e=document.createElement("style"),n=t.hideOnLg?"@media (min-width: 768px) { #".concat(f,", #").concat(A," { display: none !important; } }"):"",r=t.hideOnSm?"@media (max-width: 767px) { #".concat(f,", #").concat(A," { display: none !important; } }"):"",a=(0,ct.YW)(n+r);a&&(e.textContent=a,document.head.appendChild(e))}var ht=n(6545),ft=n.n(ht),vt=n(3460);function gt(t){var e;if(s.A.isApp){var n=function(t){return{callback:"function"===typeof t?t:"function"===typeof(null===t||void 0===t?void 0:t.callback)?t.callback:function(){},from:"string"===typeof(null===t||void 0===t?void 0:t.from)?null===t||void 0===t?void 0:t.from:"",contextualMsg:"string"===typeof(null===t||void 0===t?void 0:t.contextualMsg)?null===t||void 0===t?void 0:t.contextualMsg:void 0,contextualParams:(0,vt.xC)(null===t||void 0===t?void 0:t.contextualParams),modifiers:Array.isArray(null===t||void 0===t?void 0:t.options)?t.options.filter((function(t){return"string"===typeof t})):void 0,loadHistory:"boolean"===typeof(null===t||void 0===t?void 0:t.loadHistory)&&t.loadHistory,source:"string"===typeof(null===t||void 0===t?void 0:t.source)?t.source:""}}(t),r=(0,vt.gy)(n.contextualParams),a={source:n.source||"3",contextualMsg:n.contextualMsg||"",contextualParams:r||"",from:n.from||"",options:(null===(e=n.modifiers)||void 0===e?void 0:e.join(","))||""},o="app/customer/service?source=".concat(a.source,"&from=").concat(a.from,"&chatbot_message=").concat(a.contextualMsg,"&contextual_params=").concat(a.contextualParams,"&options=").concat(a.options);ft().nav({location:o}),n.callback(!0)}}var mt=$.A.init({project:C});function yt(){try{var t=mt.get(w);return t&&"object"===typeof t?{unreadCount:(null===t||void 0===t?void 0:t.unreadCount)||0,lastReadMsgSeq:(null===t||void 0===t?void 0:t.lastReadMsgSeq)||0,timestamp:(null===t||void 0===t?void 0:t.timestamp)||0}:{unreadCount:0,lastReadMsgSeq:0,timestamp:0}}catch(e){return{unreadCount:0,lastReadMsgSeq:0,timestamp:0}}}function xt(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var r=yt();if(n||e>=r.lastReadMsgSeq){var a={unreadCount:t||0,lastReadMsgSeq:e||0,timestamp:Date.now()};mt.set(w,a)}}catch(o){}}var kt=!1,At=!1;function bt(){return null!==document.getElementById(A)}function wt(){var t=document.getElementById(f);if(t){var e=kt&&!At;e!==("flex"===t.style.display)&&(t.style.display=e?"flex":"none")}}function Ct(t){var e=t>0;if(e!==kt){kt=e;var n=document.getElementById(A);n&&(n.style.display=kt?"block":"none"),kt||(At=!1)}wt()}function Et(){At=!0,wt()}function Tt(){return It.apply(this,arguments)}function It(){return(It=(0,a.A)(i().mark((function t(){var e,n,r,a,o,c,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!bt()){t.next=2;break}return t.abrupt("return");case 2:if(e=""){t.next=13;break}return t.prev=4,t.next=7,rt();case 7:e=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),e="";case 13:n=st(),r=ut(e,Et),(a=document.getElementById(h))&&(a.appendChild(n),r&&document.body.appendChild(r)),r&&dt(),lt(),o=X(d.A.href),c=o.sm,s=o.lg,pt({hideOnSm:c,hideOnLg:s});case 21:case"end":return t.stop()}}),t,null,[[4,10]])})))).apply(this,arguments)}function _t(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,a.A)(i().mark((function t(e){var n,r,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.key===E){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,n=e.newValue?JSON.parse(e.newValue):{},r=n[w],!((a=(null===r||void 0===r?void 0:r.unreadCount)||0)>0)||bt()){t.next=9;break}return t.next=9,Tt();case 9:Ct(a),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function jt(t){return St.apply(this,arguments)}function St(){return(St=(0,a.A)(i().mark((function t(e){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(e||{}).unreadCount,r=void 0===n?1:n,bt()){t.next=4;break}return t.next=4,Tt();case 4:Ct(r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rt(t){if(bt()){var e=(t||{}).unreadCount;Ct(void 0===e?0:e)}}function Nt(){return(Nt=(0,a.A)(i().mark((function t(e){var n,r,a,o,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){r=e.unreadCount,a=null!==(n=e.lastReadMsgSeq)&&void 0!==n?n:"",o=0;try{o=parseInt(a,10)||0}catch(i){}xt(r,o,!0)}if(!((c=yt()).unreadCount>0)){t.next=5;break}return t.next=5,Tt();case 5:Ct(c.unreadCount),u.A.receive(T.SHOW_NOTIFICATION,jt),u.A.receive(T.HIDE_NOTIFICATION,Rt),window.addEventListener("storage",_t);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jt(t,e){t.addEventListener("click",(function(n){n.preventDefault(),N.isInjected()||N.isInjecting()||(J({isLoaded:N.isInjected()}),Ct(0),t.setAttribute("data-open-chat-on-load","true"),t.setAttribute("class","cs-loading"),function(t,e){var n=D(e),r=n.spinnerColor,a=n.spinnerThickness,o=document.createElement("style");o.textContent="#".concat(b," {")+"width: 22px;height: 22px;border-radius: 22px;"+"border: ".concat(a," solid transparent;")+"border-top-color: ".concat(r,";")+"border-right-color: ".concat(r,";")+"display: none;box-sizing: border-box;background-color: transparent;animation: rotation 0.5s cubic-bezier(0.29, 0.13, 0.71, 0.84) infinite;}"+"#".concat(t,".cs-loading > #").concat(b," { display: inline-flex; }")+"@keyframes rotation {from { transform: rotate(0deg); }to { transform: rotate(360deg); }}",document.head.appendChild(o)}(t.id,e),P(),setTimeout((function(){t.setAttribute("class","")}),4e3))}))}function Lt(){var t=d.A.pathname;return String(t).includes("support-center/chat")}var Mt=new(n(8237).SS)({project:"ok-assistant-session"}),Pt="lastVisitedPages",Bt=5;function Dt(){try{if((0,l.f)())return;var t=s.A.langPath,e=d.A.pathname,n=function(){try{var t=Mt.get(Pt);return"string"===typeof t?t.split(","):[]}catch(e){return[]}}(),r=e.replace(t,"");if(n.length>0&&n[n.length-1]===r)return;for(n.push(r);n.length>Bt;)n.shift();!function(t){try{Mt.set(Pt,t.join(","))}catch(e){}}(n)}catch(a){}}function Ut(t,e){if(!function(){var t,e;return Boolean(null===(t=s.A.site)||void 0===t||null===(e=t.is)||void 0===e?void 0:e.oklink)}())if(!s.A.isApp||Lt()){if(!Lt()){!function(t){var e=t.incoming,n=t.outgoing,r=t.onRelay;u.A.receive(e,(function(){r();for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];u.A.send.apply(u.A,[n].concat(e))}))}({incoming:T.INCOMING,outgoing:T.OUTGOING,onRelay:function(){J({isLoaded:N.isInjected()}),P()}});var n="true"===(new F.A).get("chatbot_toggle");n?P():c.e.preloadModuleManifest("customerService");var r=X(d.A.href),a=r.sm,o=r.lg;if(!a||!o){var i=U(h,t);!function(t){Nt.apply(this,arguments)}(e),function(t,e){var n=document.createElement("style"),r="@media (min-width: 768px) { #".concat(t," { display: ").concat(e.hideOnLg?"none":"flex","; } }"),a="@media (max-width: 767px) { #".concat(t," { display: ").concat(e.hideOnSm?"none":"flex","; } }");n.textContent=r+a,document.head.appendChild(n)}(h,{hideOnSm:a,hideOnLg:o}),n||Jt(i,t)}}}else u.A.receive(T.INCOMING,gt)}function qt(){return(qt=(0,a.A)(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Dt(),(0,l.f)()){t.next=12;break}t.prev=2,p.S.init(),t.next=12;break;case 6:throw t.prev=6,t.t0=t.catch(2),(e=new Error("Failed to initialize user journey tracker")).name="UserJourneyTrackerError",e.innerError=t.t0,e;case 12:return t.abrupt("return",Promise.all([et(),ot()]).then((function(t){var e=(0,r.A)(t,2);Ut(e[0],e[1])})).catch((function(){Ut(!1,{unreadCount:0})})));case 13:case"end":return t.stop()}}),t,null,[[2,6]])})))).apply(this,arguments)}(0,n(6846).U)("chatbotLoader",{__esModule:!0,loadChatbot:function(){return qt.apply(this,arguments)}})},6846:(t,e,n)=>{n.d(e,{U:()=>c});var r=n(7136),a=n(7566),o=n(9692),i="cgCustomerService",c=function(t,e){(0,o.f)()||(window.okui=window.okui||{},window.okui.assetRegistry=window.okui.assetRegistry||{},window.okui.assetRegistry[i]=(0,a.A)((0,a.A)({},window.okui.assetRegistry[i]),{},(0,r.A)({},t,e)))}},9175:(t,e,n)=>{n.d(e,{J:()=>o,a:()=>i});var r=n(1578),a=n(8237),o=new r.LS({project:"ok-assistant"}),i=new a.SS({project:"ok-assistant-session"})},2187:()=>{},1594:t=>{t.exports=React},9919:t=>{t.exports=ReactJSX},7185:t=>{t.exports=utils.ont},6545:t=>{t.exports=window.jsbridge}},t=>{t.O(0,[8274,2741,9514,1148],(()=>{return e=8794,t(t.s=e);var e}));t.O()}]);
//# sourceMappingURL=https://static-daily.okg.com/crash/okfe/customer-service/chatbotLoader/index.0868d8eb.js.map